{"version":3,"sources":["webpack://@fof/nightmode/webpack/bootstrap","webpack://@fof/nightmode/./forum.js","webpack://@fof/nightmode/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/nightmode/./src/forum/addMenuItems.js","webpack://@fof/nightmode/./src/forum/components/AutoThemeModal.js","webpack://@fof/nightmode/./src/forum/index.js","webpack://@fof/nightmode/external \"flarum.core.compat['Model']\"","webpack://@fof/nightmode/external \"flarum.core.compat['app']\"","webpack://@fof/nightmode/external \"flarum.core.compat['components/Button']\"","webpack://@fof/nightmode/external \"flarum.core.compat['components/Modal']\"","webpack://@fof/nightmode/external \"flarum.core.compat['components/Page']\"","webpack://@fof/nightmode/external \"flarum.core.compat['components/SessionDropdown']\"","webpack://@fof/nightmode/external \"flarum.core.compat['extend']\"","webpack://@fof/nightmode/external \"flarum.core.compat['models/User']\"","webpack://@fof/nightmode/external \"flarum.core.compat['tags/components/TagsPage']\"","webpack://@fof/nightmode/external \"flarum.core.compat['utils/KeyboardNavigatable']\""],"names":["DisplayOledPromptIfNeeded","_app","oledSwitched","darkModeTurningOff","darkModeTurningOn","app","session","user","canUseDarkMode","canChangeDarkModeType","fofNightModeOledType","preferences","fofNightMode","ls","window","localStorage","getItem","shouldShowOledPrompt","$","length","banner","document","createElement","className","innerHTML","translator","trans","a1","a2","join","body","appendChild","click","matchMedia","matches","focus","$toggleBtn","parent","css","addClass","remove","setItem","extend","SessionDropdown","prototype","items","lightState","oledState","add","Button","component","icon","href","children","onclick","savePreferences","fofNightModeOverrideAuto","toggleClass","Page","AutoThemeModal","isDismissible","init","selected","filter","m","prop","focused","option","title","content","e","preventDefault","stopPropagation","onButtonClick","onsubmit","props","modal","close","redraw","strategy","Modal","initializers","User","Model","attribute","HandleModalSubmit","removeClass","show","TagsPage","addMenuItems"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","/*\r\n * This file is part of Flarum.\r\n *\r\n * (c) Toby Zerner <toby.zerner@gmail.com>\r\n *\r\n * For the full copyright and license information, please view the LICENSE\r\n * file that was distributed with this source code.\r\n */\r\n\r\nexport * from './src/forum';\r\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import { extend } from \"flarum/extend\";\r\nimport SessionDropdown from \"flarum/components/SessionDropdown\";\r\nimport Button from \"flarum/components/Button\";\r\nimport Page from \"flarum/components/Page\";\r\n\r\nexport default function() {\r\n    function DisplayOledPromptIfNeeded(\r\n        _app,\r\n        oledSwitched = false,\r\n        darkModeTurningOff = false,\r\n        darkModeTurningOn = false\r\n    ) {\r\n        if (\r\n            !app.session.user ||\r\n            !_app.session.user.canUseDarkMode() ||\r\n            !_app.session.user.canChangeDarkModeType()\r\n        )\r\n            return;\r\n\r\n        let fofNightModeOledType = _app.session.user.preferences()\r\n            .fofNightModeOledType;\r\n        let fofNightMode = _app.session.user.preferences().fofNightMode;\r\n        let ls = window.localStorage.getItem(\r\n            \"giffgaff_darkmode_oledpromptshown\"\r\n        )\r\n            ? false\r\n            : true;\r\n\r\n        const shouldShowOledPrompt =\r\n            !oledSwitched &&\r\n            (!(darkModeTurningOff || !fofNightMode) || darkModeTurningOn) &&\r\n            !fofNightModeOledType &&\r\n            ls;\r\n\r\n        // dark mode must be enabled, oled prompt should be shown, and isn't already shown\r\n        if (\r\n            shouldShowOledPrompt &&\r\n            $(\"section.ggDarkModeBanner\").length === 0\r\n        ) {\r\n            let banner = document.createElement(\"section\");\r\n            banner.className = \"ggDarkModeBanner\";\r\n            banner.innerHTML =\r\n                _app.translator\r\n                    .trans(\"fof-nightmode.forum.oled_banner\", {\r\n                        a1: `<a href='#' class=\"blackmodebannershow\">`,\r\n                        a2: `</a>`\r\n                    })\r\n                    .join(\"\") +\r\n                ` <a href=\"#\" class=\"dismiss-btn\" title=\"Dismiss alert\"><i class=\"fas fa-times\"></i></a>`;\r\n\r\n            document.body.appendChild(banner);\r\n\r\n            $(\"section.ggDarkModeBanner a.blackmodebannershow\").click(\r\n                function() {\r\n                    if (window.matchMedia(\"(min-width: 768px)\").matches) {\r\n                        $(\r\n                            \"#header-secondary > ul > li.item-session > div > button.Button--user\"\r\n                        ).click();\r\n                        \"#header-secondary > ul > li.item-session > div > ul > li.item-toggleOledDarkMode > button\".focus();\r\n                    } else {\r\n                        // small screen\r\n                        while (\r\n                            $(\r\n                                \".App-backControl .Button.Navigation-back.Button--icon.hasIcon\"\r\n                            ).length > 0\r\n                        ) {\r\n                            $(\r\n                                \".App-backControl .Button.Navigation-back.Button--icon.hasIcon\"\r\n                            ).click();\r\n                        }\r\n\r\n                        $(\r\n                            \".App-backControl .Button.Button--icon.Navigation-drawer.hasIcon\"\r\n                        ).click();\r\n                        $(\r\n                            \"#header-secondary > ul > li.item-session > div > button.Button--user\"\r\n                        ).click();\r\n                        let $toggleBtn = $(\r\n                            \"#header-secondary > ul > li.item-session > div > ul > li.item-toggleOledDarkMode > button\"\r\n                        );\r\n                        $toggleBtn.parent().css(\"overflow\", \"hidden\");\r\n                        $toggleBtn.addClass(\"pulsate\");\r\n                    }\r\n                    return false;\r\n                }\r\n            );\r\n\r\n            $(\"section.ggDarkModeBanner a.dismiss-btn\").click(function() {\r\n                $(\"section.ggDarkModeBanner\").remove();\r\n\r\n                window.localStorage.setItem(\r\n                    \"giffgaff_darkmode_oledpromptshown\",\r\n                    true\r\n                );\r\n\r\n                return false;\r\n            });\r\n        } else if ($(\"section.ggDarkModeBanner\").length > 0) {\r\n            $(\"section.ggDarkModeBanner\").remove();\r\n        }\r\n    }\r\n\r\n    extend(SessionDropdown.prototype, \"items\", function(items) {\r\n        if (app.session.user.canUseDarkMode()) {\r\n            let lightState =\r\n                app.session.user.preferences().fofNightMode == true\r\n                    ? false\r\n                    : true;\r\n\r\n            let oledState =\r\n                app.session.user.canChangeDarkModeType() &&\r\n                app.session.user.preferences().fofNightModeOledType == true\r\n                    ? true\r\n                    : false;\r\n\r\n            // Add night mode link to session dropdown\r\n            items.add(\r\n                app.session.user && app.session.user.preferences().fofNightMode\r\n                    ? \"nightmode\"\r\n                    : \"daymode\",\r\n                Button.component({\r\n                    icon: lightState == true ? \"fas fa-moon\" : \"fas fa-sun\",\r\n                    href: \"javascript:;\",\r\n                    children:\r\n                        lightState == true\r\n                            ? app.translator.trans(\"fof-nightmode.forum.night\")\r\n                            : app.translator.trans(\"fof-nightmode.forum.day\"),\r\n                    onclick: function() {\r\n                        DisplayOledPromptIfNeeded(\r\n                            app,\r\n                            false,\r\n                            !lightState,\r\n                            lightState\r\n                        );\r\n\r\n                        // Toggle night mode on or off by changing the user preference\r\n                        app.session.user.savePreferences({\r\n                            fofNightMode: lightState,\r\n                            fofNightModeOverrideAuto: true\r\n                        });\r\n\r\n                        $(\"body\").toggleClass(\"dark\");\r\n                    }\r\n                }),\r\n                -1\r\n            );\r\n\r\n            if (app.session.user.canChangeDarkModeType() && !lightState) {\r\n                // Add night mode link to session dropdown\r\n                items.add(\r\n                    \"toggleOledDarkMode\",\r\n                    Button.component({\r\n                        icon: \"far fa-moon\",\r\n                        children: oledState\r\n                            ? app.translator.trans(\r\n                                  \"fof-nightmode.forum.user.settings.oled_off\"\r\n                              )\r\n                            : app.translator.trans(\r\n                                  \"fof-nightmode.forum.user.settings.oled_on\"\r\n                              ),\r\n                        onclick: () => {\r\n                            DisplayOledPromptIfNeeded(app, true);\r\n\r\n                            // console.log(`OLED mode state: ${!oledState}`);\r\n\r\n                            // Toggle night mode on or off by changing the user preference\r\n                            app.session.user.savePreferences({\r\n                                fofNightModeOledType: !oledState\r\n                            });\r\n\r\n                            $(\"body\").toggleClass(\"dark--oled\");\r\n                        }\r\n                    }),\r\n                    -1\r\n                );\r\n            }\r\n        }\r\n    });\r\n\r\n    extend(Page.prototype, \"init\", function() {\r\n        DisplayOledPromptIfNeeded(app);\r\n    });\r\n}\r\n","import Modal from \"flarum/components/Modal\";\r\nimport Button from \"flarum/components/Button\";\r\nimport KeyboardNavigatable from \"flarum/utils/KeyboardNavigatable\";\r\n\r\nexport default class AutoThemeModal extends Modal {\r\n    isDismissible() {\r\n        return false;\r\n    }\r\n\r\n    init() {\r\n        super.init();\r\n\r\n        this.selected = [];\r\n        this.filter = m.prop(\"\");\r\n        this.focused = false;\r\n\r\n        this.option = true;\r\n\r\n        // TODO: Make keyboard accessible\r\n        // this.navigator = new KeyboardNavigatable();\r\n        // this.navigator\r\n        //     .onUp(() => this.setIndex(this.getCurrentNumericIndex() - 1, true))\r\n        //     .onDown(() =>\r\n        //         this.setIndex(this.getCurrentNumericIndex() + 1, true)\r\n        //     )\r\n        //     .onSelect(this.select.bind(this))\r\n        //     .onRemove(() => this.selected.splice(this.selected.length - 1, 1));\r\n    }\r\n\r\n    className() {\r\n        return \"ggNightModeModal\";\r\n    }\r\n\r\n    title() {\r\n        return app.translator.trans(\r\n            \"fof-nightmode.forum.auto_theme.dialog.title\"\r\n        );\r\n    }\r\n\r\n    content() {\r\n        return [\r\n            <div className=\"Modal-body\">\r\n                <div className=\"ggNightModeModal--auto-theme\">\r\n                    <p className=\"ggNightModeModal--paragraph\">\r\n                        {app.translator.trans(\r\n                            \"fof-nightmode.forum.auto_theme.dialog.message\"\r\n                        )}\r\n                    </p>\r\n                    <p className=\"ggNightModeModal--paragraph\">\r\n                        <strong>\r\n                            {app.translator.trans(\r\n                                \"fof-nightmode.forum.auto_theme.dialog.prompt\"\r\n                            )}\r\n                        </strong>\r\n                    </p>\r\n                </div>\r\n\r\n                <div className=\"Form Form--centered\">\r\n                    <div className=\"Form-group\">\r\n                        {Button.component({\r\n                            className: \"Button Button--primary\",\r\n                            icon: \"fas fa-check\",\r\n                            children: app.translator.trans(\r\n                                \"fof-nightmode.forum.auto_theme.dialog.keep_enabled_btn\"\r\n                            ),\r\n                            onclick: e => {\r\n                                e.preventDefault();\r\n                                e.stopPropagation();\r\n                                this.onButtonClick(\"keep\");\r\n                            }\r\n                        })}\r\n                    </div>\r\n\r\n                    <div className=\"Form-group\">\r\n                        {Button.component({\r\n                            className: \"Button Button--primary Button--cancel\",\r\n                            icon: \"fas fa-times\",\r\n                            children: app.translator.trans(\r\n                                \"fof-nightmode.forum.auto_theme.dialog.turn_off_btn\"\r\n                            ),\r\n                            onclick: e => {\r\n                                e.preventDefault();\r\n                                e.stopPropagation();\r\n                                this.onButtonClick(\"undo\");\r\n                            }\r\n                        })}\r\n                    </div>\r\n                </div>\r\n            </div>,\r\n\r\n            <div className=\"Modal-footer\">\r\n                <p className=\"ggNightModeModal--note\">\r\n                    <span className=\"ggNightModeModal-note--large-screen\">\r\n                        {app.translator.trans(\r\n                            \"fof-nightmode.forum.auto_theme.dialog.note\"\r\n                        )}\r\n                    </span>\r\n                    <span className=\"ggNightModeModal-note--small-screen\">\r\n                        {app.translator.trans(\r\n                            \"fof-nightmode.forum.auto_theme.dialog.note_mobile\"\r\n                        )}\r\n                    </span>\r\n                </p>\r\n            </div>\r\n        ];\r\n    }\r\n\r\n    onsubmit(e) {\r\n        e.preventDefault();\r\n    }\r\n\r\n    onButtonClick(e) {\r\n        if (this.props.onsubmit) this.props.onsubmit(e);\r\n\r\n        app.modal.close();\r\n        m.redraw.strategy(\"none\");\r\n    }\r\n}\r\n","import { extend } from \"flarum/extend\";\r\nimport app from \"flarum/app\";\r\nimport Page from \"flarum/components/Page\";\r\nimport TagsPage from \"flarum/tags/components/TagsPage\";\r\nimport Model from \"flarum/Model\";\r\nimport User from \"flarum/models/User\";\r\n\r\nimport addMenuItems from \"./addMenuItems\";\r\nimport AutoThemeModal from \"./components/AutoThemeModal\";\r\n\r\napp.initializers.add(\"fof-nightmode\", app => {\r\n    User.prototype.canUseDarkMode = Model.attribute(\"canUseDarkMode\");\r\n    User.prototype.canChangeDarkModeType = Model.attribute(\r\n        \"canChangeDarkModeType\"\r\n    );\r\n\r\n    extend(Page.prototype, \"init\", function() {\r\n        function HandleModalSubmit(e) {\r\n            if (e === \"keep\") {\r\n                // keep auto theme (i.e. i like my retinas being perfectly healthy)\r\n\r\n                app.session.user.savePreferences({\r\n                    fofNightMode: true,\r\n                    fofNightModeOverrideAuto: false\r\n                });\r\n            } else {\r\n                // go back to light mode (i.e. i like burning my retinas)\r\n\r\n                app.session.user.savePreferences({\r\n                    fofNightMode: false,\r\n                    fofNightModeOverrideAuto: true\r\n                });\r\n\r\n                $(\"body\").removeClass(\"dark\");\r\n            }\r\n        }\r\n\r\n        if (\r\n            app.session.user &&\r\n            app.session.user.canUseDarkMode() &&\r\n            app.session.user.preferences().fofNightMode\r\n        ) {\r\n            $(\"body\").addClass(\"dark\");\r\n        } else if (\r\n            (!app.session.user ||\r\n                (app.session.user &&\r\n                    !app.session.user.preferences()\r\n                        .fofNightModeOverrideAuto)) &&\r\n            window.matchMedia(\"(prefers-color-scheme: dark)\").matches\r\n        ) {\r\n            $(\"body\").addClass(\"dark\");\r\n\r\n            // show dialog asking logged in user if they wish\r\n            // to override detected theme\r\n            if (app.session.user) {\r\n                app.modal.show(\r\n                    new AutoThemeModal({ onsubmit: HandleModalSubmit })\r\n                );\r\n            }\r\n        } else {\r\n            $(\"body\").removeClass(\"dark\");\r\n        }\r\n\r\n        if (\r\n            app.session.user &&\r\n            app.session.user.canUseDarkMode() &&\r\n            app.session.user.canChangeDarkModeType() &&\r\n            app.session.user.preferences().fofNightModeOledType\r\n        ) {\r\n            $(\"body\").addClass(\"dark--oled\");\r\n        } else {\r\n            $(\"body\").removeClass(\"dark--oled\");\r\n        }\r\n    });\r\n\r\n    if (TagsPage) {\r\n        function HandleModalSubmit(e) {}\r\n\r\n        extend(TagsPage.prototype, \"config\", function() {\r\n            if (\r\n                app.session.user &&\r\n                app.session.user.canUseDarkMode() &&\r\n                app.session.user.preferences().fofNightMode\r\n            ) {\r\n                $(\"body\").addClass(\"dark\");\r\n            } else if (\r\n                (!app.session.user ||\r\n                    (app.session.user &&\r\n                        !app.session.user.preferences()\r\n                            .fofNightModeOverrideAuto)) &&\r\n                window.matchMedia(\"(prefers-color-scheme: dark)\").matches\r\n            ) {\r\n                $(\"body\").addClass(\"dark\");\r\n\r\n                // show dialog asking logged in user if they wish\r\n                // to override detected theme\r\n                if (app.session.user) {\r\n                    app.modal.show(\r\n                        new AutoThemeModal({ onsubmit: HandleModalSubmit })\r\n                    );\r\n                }\r\n            } else {\r\n                $(\"body\").removeClass(\"dark\");\r\n            }\r\n\r\n            if (\r\n                app.session.user &&\r\n                app.session.user.canUseDarkMode() &&\r\n                app.session.user.canChangeDarkModeType() &&\r\n                app.session.user.preferences().fofNightModeOledType\r\n            ) {\r\n                $(\"body\").addClass(\"dark--oled\");\r\n            } else {\r\n                $(\"body\").removeClass(\"dark--oled\");\r\n            }\r\n        });\r\n    }\r\n\r\n    addMenuItems();\r\n});\r\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['components/Page'];","module.exports = flarum.core.compat['components/SessionDropdown'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['models/User'];","module.exports = flarum.core.compat['tags/components/TagsPage'];","module.exports = flarum.core.compat['utils/KeyboardNavigatable'];"],"sourceRoot":""}