module.exports=function(e){var o={};function n(s){if(o[s])return o[s].exports;var r=o[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=o,n.d=function(e,o,s){n.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,o){if(1&o&&(e=n(e)),8&o)return e;if(4&o&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&o&&"string"!=typeof e)for(var r in e)n.d(s,r,function(o){return e[o]}.bind(null,r));return s},n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,"a",o),o},n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},n.p="",n(n.s=9)}([function(e,o){e.exports=flarum.core.compat.extend},function(e,o){e.exports=flarum.core.compat.app},function(e,o){e.exports=flarum.core.compat["components/Page"]},function(e,o){e.exports=flarum.core.compat["tags/components/TagsPage"]},function(e,o){e.exports=flarum.core.compat.Model},function(e,o){e.exports=flarum.core.compat["models/User"]},function(e,o){e.exports=flarum.core.compat["components/Button"]},function(e,o){e.exports=flarum.core.compat["components/SessionDropdown"]},,function(e,o,n){"use strict";n.r(o);var s=n(0),r=n(1),a=n.n(r),t=n(2),i=n.n(t),d=n(3),c=n.n(d),f=n(4),p=n.n(f),u=n(5),l=n.n(u),m=n(7),g=n.n(m),y=n(6),k=n.n(y),h=function(){function e(e,o,n,s){if(void 0===o&&(o=!1),void 0===n&&(n=!1),void 0===s&&(s=!1),app.session.user&&e.session.user.canUseDarkMode()&&e.session.user.canChangeDarkModeType()){var r=e.session.user.preferences().fofNightModeOledType,a=e.session.user.preferences().fofNightMode,t=!window.localStorage.getItem("giffgaff_darkmode_oledpromptshown");if(!o&&(!(n||!a)||s)&&!r&&t&&0===$("section.ggDarkModeBanner").length){var i=document.createElement("section");i.className="ggDarkModeBanner",i.innerHTML='If dark mode is still too light, you can <a href=\'#\' class="blackmodebannershow">switch to black mode</a> (saves battery on OLED screens). <a href="#" class="dismiss-btn" title="Dismiss alert"><i class="fas fa-times"></i></a>',document.body.appendChild(i),$("section.ggDarkModeBanner a.blackmodebannershow").click((function(){return $("#header-secondary > ul > li.item-session > div > button").click(),$("#header-secondary > ul > li.item-session > div > ul > li.item-toggleOledDarkMode > button").focus(),!1})),$("section.ggDarkModeBanner a.dismiss-btn").click((function(){return $("section.ggDarkModeBanner").remove(),window.localStorage.setItem("giffgaff_darkmode_oledpromptshown",!0),!1}))}else $("section.ggDarkModeBanner").length>0&&$("section.ggDarkModeBanner").remove()}}Object(s.extend)(g.a.prototype,"items",(function(o){if(app.session.user.canUseDarkMode()){var n=1!=app.session.user.preferences().fofNightMode,s=!(!app.session.user.canChangeDarkModeType()||1!=app.session.user.preferences().fofNightModeOledType);o.add(app.session.user&&app.session.user.preferences().fofNightMode?"nightmode":"daymode",k.a.component({icon:1==n?"fas fa-moon":"fas fa-sun",href:"javascript:;",children:1==n?app.translator.trans("fof-nightmode.forum.night"):app.translator.trans("fof-nightmode.forum.day"),onclick:function(){e(app,!1,!n,n),app.session.user.savePreferences({fofNightMode:n}),$("body").toggleClass("dark")}}),-1),app.session.user.canChangeDarkModeType()&&!n&&o.add("toggleOledDarkMode",k.a.component({icon:"far fa-moon",children:s?app.translator.trans("fof-nightmode.forum.user.settings.oled_off"):app.translator.trans("fof-nightmode.forum.user.settings.oled_on"),onclick:function(){e(app,!0),app.session.user.savePreferences({fofNightModeOledType:!s}),$("body").toggleClass("dark--oled")}}),-1)}})),Object(s.extend)(i.a.prototype,"init",(function(){e(app)}))};a.a.initializers.add("fof-nightmode",(function(e){l.a.prototype.canUseDarkMode=p.a.attribute("canUseDarkMode"),l.a.prototype.canChangeDarkModeType=p.a.attribute("canChangeDarkModeType"),Object(s.extend)(i.a.prototype,"init",(function(){e.session.user&&e.session.user.canUseDarkMode()&&e.session.user.preferences().fofNightMode?$("body").addClass("dark"):$("body").removeClass("dark"),e.session.user&&e.session.user.canUseDarkMode()&&e.session.user.canChangeDarkModeType()&&e.session.user.preferences().fofNightModeOledType?$("body").addClass("dark--oled"):$("body").removeClass("dark--oled")})),c.a&&Object(s.extend)(c.a.prototype,"config",(function(){e.session.user&&e.session.user.canUseDarkMode()&&e.session.user.preferences().fofNightMode?$("body").addClass("dark"):$("body").removeClass("dark"),e.session.user&&e.session.user.canUseDarkMode()&&e.session.user.canChangeDarkModeType()&&e.session.user.preferences().fofNightModeOledType?$("body").addClass("dark--oled"):$("body").removeClass("dark--oled")})),h()}))}]);
//# sourceMappingURL=forum.js.map